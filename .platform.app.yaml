# .platform.app.yaml

# The name of this application, which must be unique within a project.
name: 'neoviaco_app'

# The type key specifies the language and version for your application.
type: 'nodejs:16'

# Use Yarn instead of npm.
build:
    flavor: none

# Build dependencies.
dependencies:
    nodejs:
        yarn: "1.22.5"



# The hooks that will be triggered when the package is deployed.
hooks:
    # Build hooks can modify the application files on disk but not access any services like databases.
    build: |
        yarn install
        yarn next build
        yarn next export

# The size of the persistent disk of the application (in MB).
disk: 5120

# The configuration of the application when it is exposed to the web.
web:
    commands:
        start: yarn next start -p $PORT

# The mounts that will be performed when the package is deployed.
mounts:
    # Next.js will try to cache files, so it must be writeable.
    '/.next':
        source: local
        source_path: 'next'

source:
  operations:
    auto-update:
      command: |
        curl -fsS https://raw.githubusercontent.com/platformsh/source-operations/main/setup.sh | { bash /dev/fd/3 sop-autoupdate; } 3<&0
